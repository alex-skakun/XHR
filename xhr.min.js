!function(a){"use strict";function b(a,b){var d,e,f,g,h,i,j={},k=Object.keys(c.defaults.headers);for(h=0,i=k.length;i>h;h++)f=k[h].toLowerCase(),j[f]=c.defaultHeaders[f];if("object"==typeof b)for(d=Object.keys(b),h=0,i=d.length;i>h;h++)f=d[h].toLowerCase(),j[f]=b[f];for(e=Object.keys(j),h=0,i=e.length;i>h;h++)f=e[h],g=j[f],isNaN(g)||"undefined"==typeof g||null===g||a.setRequestHeader(f,String(g))}function c(d){if(d){var e=new XMLHttpRequest,f=new c.XHRPromise(e),g="",h=!0,i=null;if(d.method="string"==typeof d.method?d.method:c.defaults.method,"object"==typeof d.attributes&&d.attributes){var j=Object.keys(d.attributes);j.forEach(function(a){e[a]=d.attributes[a]})}if("object"==typeof d.params&&d.params){var k=[],l=Object.keys(d.params);l.forEach(function(a){var b=d.params[a];Array.isArray(b)?b.forEach(function(b){k.push(a+"="+b)}):"object"==typeof b&&b?k.push(a+"="+JSON.stringify(b)):"undefined"!=typeof b&&k.push(a+"="+b)}),k.length&&(g="?"+k.join("&"))}if(void 0!==d.async&&(h=!!d.async),e.open(d.method,d.url+g,h),b(e,d.headers),void 0!==d.data){var m=d.data;i=m instanceof(a.ArrayBufferView||a.ArrayBuffer)||m instanceof a.Blob||m instanceof a.Document||m instanceof a.FormData?m:"object"==typeof m&&m?JSON.stringify(m):String(m)}return e.addEventListener("error",function(a){f.applyCallback("error",a)}),e.addEventListener("progress",function(a){f.applyCallback("progress",a)}),e.addEventListener("loadstart",function(a){f.applyCallback("loadstart",a)}),e.addEventListener("loadend",function(a){f.applyCallback("loadend",a)}),e.addEventListener("abort",function(a){f.applyCallback("abort",a)}),e.addEventListener("load",function(a){f.applyCallback("load",a);var b=e.response;if("json"!==e.responseType)try{b=JSON.parse(e.responseText)}catch(a){b=e.responseText}e.status>=200&&e.status<400?f.applyCallback("success",b):e.status>=400&&e.status<600&&f.applyCallback("error",a)},!1),setTimeout(function(){e.send(i)},0),f.actions}throw new Error("Config object is required.")}Object.defineProperty(c,"defaults",{value:{method:"GET",headers:{},attributes:{responseType:"",timeout:0}},configurable:!1,writable:!1}),a.XHR=c,"function"==typeof define&&null!==define.amd&&define("XHR",[],function(){return c})}(window),function(a){"use strict";function b(a){var b=this;this.callbacks={error:null,loadStart:null,progress:null,loadEnd:null,abort:null,load:null,success:null},this.actions={error:function(a){return b.callbacks.error=a,b.actions},loadStart:function(a){return b.callbacks.loadStart=a,b.actions},progress:function(a){return b.callbacks.progress=a,b.actions},loadEnd:function(a){return b.callbacks.loadEnd=a,b.actions},abort:function(a){return b.callbacks.abort=a,b.actions},load:function(a){return b.callbacks.load=a,b.actions},success:function(a){return b.callbacks.success=a,b.actions},getXHR:function(){return a}}}b.prototype.applyCallback=function(a,b){var c=this.callbacks[a];"function"==typeof c&&c(b)},a.XHRPromise=b}(window.XHR);